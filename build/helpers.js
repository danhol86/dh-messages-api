"use strict";
//functions such as encrpypting and read proto etc. 
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.HelperFunctions = void 0;
const { subtle } = require('crypto').webcrypto;
const Blob = require('cross-blob');
const crypto = require("crypto");
class HelperFunctions {
    static ProcessConvData(data) {
        var datare = {
            ConvId: data[0],
            ConvName: data[1],
            LastMsgId: data[16],
            UserId: data[10],
            LastMsgTimeStamp: data[4],
            Recipients: HelperFunctions.ProcessRecipients(data[19]),
            Avatar: data[8] ? Buffer.from(data[8][2]).toString('base64') : null
        };
        return datare;
    }
    static ProcessRecipients(recips) {
        var recipsReturn;
        recipsReturn = [];
        for (var r in recips) {
            var re = recips[r];
            if (re[0][1]) {
                recipsReturn.push({
                    Id: re[0][2],
                    Number: re[0][1],
                });
            }
        }
        return recipsReturn;
    }
    static ProcessMsgData(data, tempIdsSending) {
        var datare = {
            MsgId: data[0],
            MsgTimeStamp: data[4],
            ConvId: data[6],
            UserId: data[8],
            TempId: data[11],
            MsgText: data[9][0][1] ? data[9][0][1][0] : null,
            MsgSubject: data[9][1] ? (data[9][1][1] ? data[9][1][1][0] : null) : null,
            ImageData: data[9][0][2],
            StatusId: data[3][1],
            StatusText: data[3][4],
            MsgSentByUser: (data[3][1] == "1" || data[3][1] == "8" || data[3][1] == "205") ? true : false,
            SentByClient: false
        };
        if (datare.MsgText == null) {
            datare.ImageData[6] = Buffer.from(datare.ImageData[6]).toString('base64');
            datare.ImageData[10] = Buffer.from(datare.ImageData[10]).toString('base64');
            datare.ImageData[11] = Buffer.from(datare.ImageData[11]).toString('base64');
        }
        if (tempIdsSending.indexOf(datare.TempId) >= 0) {
            datare.SentByClient = true;
        }
        return datare;
    }
    static DeCryptMessage2(message, crypto_msg_enc_key) {
        return __awaiter(this, void 0, void 0, function* () {
            var a = message;
            var key = yield subtle.importKey("raw", crypto_msg_enc_key, {
                name: "AES-CTR",
                length: crypto_msg_enc_key.length
            }, !1, ["encrypt", "decrypt"]);
            var c;
            if (48 > a.length)
                throw new RangeError("hc");
            if (null != c)
                throw Error("ic");
            c = new Uint8Array(Array.prototype.slice.call(a, 0, a.length - 32));
            a = new Uint8Array(Array.prototype.slice.call(a, c.length));
            a = new Uint8Array(Array.prototype.slice.call(c, c.length - 16));
            c = new Uint8Array(Array.prototype.slice.call(c, 0, c.length - 16));
            const b = new Uint8Array(16);
            b.set(a);
            let d;
            d = yield subtle.decrypt({
                name: "AES-CTR",
                counter: b,
                length: 128
            }, key, c);
            return new Uint8Array(d);
        });
    }
    static EncryptMessage(message, crypto_msg_enc_key, crypto_msg_hmac) {
        return __awaiter(this, void 0, void 0, function* () {
            message = new Uint8Array(message);
            crypto_msg_enc_key = Buffer.from(crypto_msg_enc_key, 'base64');
            crypto_msg_hmac = Buffer.from(crypto_msg_hmac, 'base64');
            var key = yield subtle.importKey("raw", crypto_msg_enc_key, {
                name: "AES-CTR",
                length: crypto_msg_enc_key.length
            }, !1, ["encrypt", "decrypt"]);
            var hmac = yield subtle.importKey("raw", crypto_msg_hmac, {
                name: "HMAC",
                hash: {
                    name: "SHA-256"
                },
                length: 8 * crypto_msg_hmac.length
            }, !1, ["sign", "verify"]);
            var a = message;
            var c = crypto.randomFillSync(new Uint8Array(16));
            const b = new Uint8Array(16);
            b.set(c);
            var d;
            d = yield subtle.encrypt({
                name: "AES-CTR",
                counter: b,
                length: 128
            }, key, a);
            a = yield HelperFunctions.li([new Uint8Array(d), c]);
            d = yield HelperFunctions.fw(hmac, a);
            if (32 != d.length)
                throw Error("gc`" + d.length);
            return yield HelperFunctions.li([a, d]);
        });
    }
    static li(a) {
        return __awaiter(this, void 0, void 0, function* () {
            var c;
            c = 0;
            for (var b of a)
                c += b.length;
            c = new Uint8Array(c);
            b = 0;
            for (const d of a)
                c.set(d, b),
                    b += d.length;
            return c;
        });
    }
    static fw(hmac, a) {
        return __awaiter(this, void 0, void 0, function* () {
            const b = yield subtle.sign({
                name: "HMAC",
                hash: {
                    name: "SHA-256"
                }
            }, hmac, a);
            return new Uint8Array(b.slice(0, 32));
        });
    }
    static getResponseBuffer(httpresp) {
        var buff = Buffer.from(httpresp);
        var base64string = buff.toString('base64');
        var finalistring = base64string.substring(20, base64string.length - 12);
        if (finalistring.startsWith("Cgo")) {
            finalistring = finalistring.substring(0, finalistring.length - 1) + "=";
        }
        return finalistring;
    }
    static groupBy2(xs, prop) {
        var grouped = {};
        for (var i = 0; i < xs.length; i++) {
            var p = xs[i][prop];
            if (!grouped[p]) {
                grouped[p] = [];
            }
            grouped[p].push(xs[i]);
        }
        return grouped;
    }
    static getKeys() {
        return __awaiter(this, void 0, void 0, function* () {
            var crypto_msg_enc_key = new Uint8Array(32);
            var crypto_msg_hmac = new Uint8Array(32);
            crypto.randomFillSync(crypto_msg_enc_key);
            crypto.randomFillSync(crypto_msg_hmac);
            var ECDSA_Keys = yield subtle.generateKey({
                name: "ECDSA",
                namedCurve: "P-256"
            }, true, ["sign"]);
            return {
                crypto_msg_enc_key,
                crypto_msg_hmac,
                ECDSA_Keys
            };
        });
    }
    static GetRefreshToken(privkey, pubkey, refreqid, utimestamp) {
        return __awaiter(this, void 0, void 0, function* () {
            var privkeysjson = Buffer.from(privkey, 'base64').toString();
            var privobj = JSON.parse(privkeysjson);
            var pubkeysjson = Buffer.from(pubkey, 'base64').toString();
            var pubobj = JSON.parse(pubkeysjson);
            var keydata = {
                kty: "EC",
                crv: "P-256",
                x: pubobj.x,
                y: pubobj.y,
                d: privobj.d
            };
            const blobb = new Blob([`${refreqid}:${utimestamp}`]);
            const arrbuffer = yield blobb.arrayBuffer();
            const blogbuff = Buffer.from(arrbuffer);
            const d = new Uint8Array(blogbuff);
            var mykeysign = yield subtle.importKey("jwk", keydata, {
                name: "ECDSA",
                namedCurve: "P-256"
            }, !0, ["sign"]);
            var msgsign = yield subtle.sign({
                name: "ECDSA",
                hash: {
                    name: "SHA-256"
                }
            }, mykeysign, d);
            var b64sign = new Uint8Array(msgsign);
            b64sign = HelperFunctions.EncodeUINT(msgsign);
            var encstr = Buffer.from(b64sign).toString('base64');
            return encstr;
        });
    }
    static EncodeUINT(c) {
        var b = new Uint8Array(c);
        if (0 != b.length % 2 || 0 == b.length || 132 < b.length)
            throw "Invalid IEEE P1363 signature encoding. Length: " + b.length;
        c = HelperFunctions.Oha(b.subarray(0, b.length / 2));
        b = HelperFunctions.Oha(b.subarray(b.length / 2, b.length));
        let d = 0;
        const e = c.length + 4 + b.length;
        let f;
        128 <= e ? (f = new Uint8Array(e + 3),
            f[d++] = 48,
            f[d++] = 129) : (f = new Uint8Array(e + 2),
            f[d++] = 48);
        f[d++] = e;
        f[d++] = 2;
        f[d++] = c.length;
        f.set(c, d);
        d += c.length;
        f[d++] = 2;
        f[d++] = b.length;
        f.set(b, d);
        c = f;
        return c;
    }
}
exports.HelperFunctions = HelperFunctions;
HelperFunctions.Oha = function (a) {
    let c = 0;
    for (; c < a.length && 0 == a[c];)
        c++;
    c == a.length && (c = a.length - 1);
    let b = 0;
    128 == (a[c] & 128) && (b = 1);
    const d = new Uint8Array(a.length - c + b);
    d.set(a.subarray(c), b);
    return d;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9oZWxwZXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxvREFBb0Q7Ozs7Ozs7Ozs7OztBQUVwRCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUMvQyxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDbkMsaUNBQWlDO0FBRWpDLE1BQWEsZUFBZTtJQUV4QixNQUFNLENBQUMsZUFBZSxDQUFDLElBQUk7UUFDdkIsSUFBSSxNQUFNLEdBQUc7WUFDVCxNQUFNLEVBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNoQixRQUFRLEVBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNsQixTQUFTLEVBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUNwQixNQUFNLEVBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUNqQixnQkFBZ0IsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLFVBQVUsRUFBRSxlQUFlLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZELE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJO1NBQ3RFLENBQUM7UUFFRixPQUFPLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBRU8sTUFBTSxDQUFDLGlCQUFpQixDQUFDLE1BQU07UUFDbkMsSUFBSSxZQUFZLENBQUM7UUFBQyxZQUFZLEdBQUcsRUFBRSxDQUFDO1FBQ3BDLEtBQUksSUFBSSxDQUFDLElBQUksTUFBTSxFQUFFO1lBQ2pCLElBQUksRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNuQixJQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDVCxZQUFZLENBQUMsSUFBSSxDQUFDO29CQUNkLEVBQUUsRUFBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNiLE1BQU0sRUFBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUNwQixDQUFDLENBQUM7YUFDTjtTQUNKO1FBRUQsT0FBTyxZQUFZLENBQUM7SUFDeEIsQ0FBQztJQUVELE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7UUFDdEMsSUFBSSxNQUFNLEdBQUc7WUFDVCxLQUFLLEVBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNmLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3JCLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ2YsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDZixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUNoQixPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7WUFDaEQsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7WUFDekUsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDeEIsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEIsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEIsYUFBYSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLO1lBQzdGLFlBQVksRUFBRSxLQUFLO1NBQ3RCLENBQUE7UUFFRCxJQUFHLE1BQU0sQ0FBQyxPQUFPLElBQUksSUFBSSxFQUFFO1lBQ3ZCLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzFFLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzVFLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQy9FO1FBRUQsSUFBSSxjQUFjLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxD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